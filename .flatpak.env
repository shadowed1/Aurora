# ========== Begin Aurora Environment ==========

add_to_path() {
  case ":$PATH:" in
    *":$1:"*) ;;
    *) PATH="$1:$PATH" ;;
  esac
}

add_to_ld_path() {
  case ":$LD_LIBRARY_PATH:" in
    *":$1:"*) ;;
    *) LD_LIBRARY_PATH="$1${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}" ;;
  esac
}

add_to_pkg_path() {
  case ":$PKG_CONFIG_PATH:" in
    *":$1:"*) ;;
    *) PKG_CONFIG_PATH="$1${PKG_CONFIG_PATH:+:$PKG_CONFIG_PATH}" ;;
  esac
}

"${STARMAN_EXPORT_PATH:=$HOME/opt/bin}"

add_to_ld_path "$STARMAN_EXPORT_PATH/lib"
add_to_ld_path "$STARMAN_EXPORT_PATH/usr/lib"
add_to_ld_path "$HOME/opt/flatpak-deps/usr/lib"
add_to_ld_path "$HOME/opt/usr/lib"
add_to_ld_path "/usr/lib"
add_to_ld_path "/lib"

add_to_path "$STARMAN_EXPORT_PATH"
add_to_path "$STARMAN_EXPORT_PATH/usr/bin"
add_to_path "$HOME/opt/bin"
add_to_path "$HOME/opt/flatpak/usr/bin"
add_to_path "$HOME/opt/flatpak-deps/usr/bin"
add_to_path "$HOME/opt/usr/bin"
add_to_path "$HOME/opt/usr/lib/xfce4/"


add_to_pkg_path "$STARMAN_EXPORT_PATH/lib/pkgconfig"
add_to_pkg_path "$STARMAN_EXPORT_PATH/usr/lib/pkgconfig"
add_to_pkg_path "$HOME/opt/usr/lib/pkgconfig"

export PATH
export LD_LIBRARY_PATH
export PKG_CONFIG_PATH

export GIT_EXEC_PATH="$HOME/opt/usr/lib/git-core"
export TMPDIR="$HOME/tmp"
export DISPLAY=":0"

export XDG_CONFIG_DIRS="$HOME/opt/etc/xdg:/home/chronos/opt/etc/xdg:/etc/xdg"
export XDG_RUNTIME_DIR="$HOME/.xdg-runtime-dir"
export XDG_DATA_DIRS="/var/lib/flatpak/exports/share:$HOME/.local/share/flatpak/exports/share:$HOME/opt/share:/usr/local/share:/usr/share"
export DBUS_SESSION_BUS_ADDRESS="unix:path=$XDG_RUNTIME_DIR/dbus-session"

export GTK_USE_PORTAL=0
export FLATPAK_DISABLE_PORTAL=1
export XDG_DESKTOP_PORTAL_DIR=/dev/null

export NPM_BASE="$HOME/opt/usr/lib/node_modules/npm"
export BIN_DIR="$HOME/opt/usr/bin"

: "${AURORA_SCALE:=1.25}"
: "${XCURSOR_SIZE:=32}"

export GDK_SCALE="$AURORA_SCALE"
export GDK_DPI_SCALE=1

export QT_SCALE_FACTOR="$AURORA_SCALE"
export QT_AUTO_SCREEN_SCALE_FACTOR=1

export ELECTRON_FORCE_DEVICE_SCALE_FACTOR="$AURORA_SCALE"
export _JAVA_OPTIONS="-Dsun.java2d.uiScale=$AURORA_SCALE"

export XCURSOR_SIZE

export NVM_DIR="$HOME/opt/usr/share/nvm"
[ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"

aurora_debug() {
  echo "==== AURORA ENVIRONMENT VARIABLES ===="
  echo "PATH=$PATH"
  echo "LD_LIBRARY_PATH=$LD_LIBRARY_PATH"
  echo "PKG_CONFIG_PATH=$PKG_CONFIG_PATH"
  echo "TMPDIR=$TMPDIR"
  echo "DISPLAY=$DISPLAY"
  echo "XDG_RUNTIME_DIR=$XDG_RUNTIME_DIR"
  echo "XDG_CONFIG_DIRS=$XDG_CONFIG_DIRS"
  echo "XDG_DATA_DIRS=$XDG_DATA_DIRS"
  echo "GTK_USE_PORTAL=$GTK_USE_PORTAL"
  echo "FLATPAK_DISABLE_PORTAL=$FLATPAK_DISABLE_PORTAL"
  echo "XDG_DESKTOP_PORTAL_DIR=$XDG_DESKTOP_PORTAL_DIR"
  echo "NPM_BASE=$NPM_BASE"
  echo "BIN_DIR=$BIN_DIR"
  echo "NVM_DIR=$NVM_DIR"
  echo "GIT_EXEC_PATH=$GIT_EXEC_PATH"
  echo "DBUS_SESSION_BUS_ADDRESS=$DBUS_SESSION_BUS_ADDRESS"
  echo "AURORA_SCALE=$AURORA_SCALE"
  echo "XCURSOR_SIZE=$XCURSOR_SIZE"
  echo "QT_SCALE_FACTOR=$QT_SCALE_FACTOR"
  echo "QT_AUTO_SCREEN_SCALE_FACTOR=$QT_AUTO_SCREEN_SCALE_FACTOR"
  echo "GDK_SCALE=$GDK_SCALE"
  echo "GDK_DPI_SCALE=$GDK_DPI_SCALE"
  echo "ELECTRON_FORCE_DEVICE_SCALE_FACTOR=$ELECTRON_FORCE_DEVICE_SCALE_FACTOR"
  echo "_JAVA_OPTIONS=$_JAVA_OPTIONS"
  echo "==============================="
}

# ========== End Aurora Environment ==========
